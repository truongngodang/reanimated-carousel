{"version":3,"sources":["useAutoPlay.ts"],"names":["useAutoPlay","opts","autoPlay","autoPlayReverse","autoPlayInterval","carouselController","prev","next","timer","React","useRef","stopped","play","useCallback","current","clearTimeout","setTimeout","onFinished","pause","start","useEffect"],"mappings":"yFAAA,oD,0/BAGO,QAASA,CAAAA,WAAT,CAAqBC,IAArB,CAKJ,CACC,mBAKIA,IALJ,CACIC,QADJ,CACIA,QADJ,yBACe,KADf,sCAKID,IALJ,CAEIE,eAFJ,CAEIA,eAFJ,gCAEsB,KAFtB,uBAGIC,gBAHJ,CAKIH,IALJ,CAGIG,gBAHJ,CAIIC,kBAJJ,CAKIJ,IALJ,CAIII,kBAJJ,CAOA,GAAQC,CAAAA,IAAR,CAAuBD,kBAAvB,CAAQC,IAAR,CAAcC,IAAd,CAAuBF,kBAAvB,CAAcE,IAAd,CACA,GAAMC,CAAAA,KAAK,CAAGC,KAAK,CAACC,MAAN,EAAd,CACA,GAAMC,CAAAA,OAAO,CAAGF,KAAK,CAACC,MAAN,CAAsB,CAACR,QAAvB,CAAhB,CAEA,GAAMU,CAAAA,IAAI,CAAGH,KAAK,CAACI,WAAN,CAAkB,UAAM,CACjC,GAAIF,OAAO,CAACG,OAAZ,CAAqB,CACjB,OACH,CAEDN,KAAK,CAACM,OAAN,EAAiBC,YAAY,CAACP,KAAK,CAACM,OAAP,CAA7B,CACAN,KAAK,CAACM,OAAN,CAAgBE,UAAU,CAAC,UAAM,CAC7Bb,eAAe,CACTG,IAAI,CAAC,CAAEW,UAAU,CAAEL,IAAd,CAAD,CADK,CAETL,IAAI,CAAC,CAAEU,UAAU,CAAEL,IAAd,CAAD,CAFV,CAGH,CAJyB,CAIvBR,gBAJuB,CAA1B,CAKH,CAXY,CAWV,CAACD,eAAD,CAAkBC,gBAAlB,CAAoCE,IAApC,CAA0CC,IAA1C,CAXU,CAAb,CAaA,GAAMW,CAAAA,KAAK,CAAGT,KAAK,CAACI,WAAN,CAAkB,UAAM,CAClC,GAAI,CAACX,QAAL,CAAe,CACX,OACH,CACDM,KAAK,CAACM,OAAN,EAAiBC,YAAY,CAACP,KAAK,CAACM,OAAP,CAA7B,CACAH,OAAO,CAACG,OAAR,CAAkB,IAAlB,CACH,CANa,CAMX,CAACZ,QAAD,CANW,CAAd,CAQA,GAAMiB,CAAAA,KAAK,CAAGV,KAAK,CAACI,WAAN,CAAkB,UAAM,CAClC,GAAI,CAACX,QAAL,CAAe,CACX,OACH,CACDS,OAAO,CAACG,OAAR,CAAkB,KAAlB,CACAF,IAAI,GACP,CANa,CAMX,CAACA,IAAD,CAAOV,QAAP,CANW,CAAd,CAQAO,KAAK,CAACW,SAAN,CAAgB,UAAM,CAClB,GAAIlB,QAAJ,CAAc,CACViB,KAAK,GACR,CAFD,IAEO,CACHD,KAAK,GACR,CACD,MAAOA,CAAAA,KAAP,CACH,CAPD,CAOG,CAACA,KAAD,CAAQC,KAAR,CAAejB,QAAf,CAPH,EASA,MAAO,CACHgB,KAAK,CAALA,KADG,CAEHC,KAAK,CAALA,KAFG,CAAP,CAIH","sourcesContent":["import * as React from 'react';\nimport type { ICarouselController } from './useCarouselController';\n\nexport function useAutoPlay(opts: {\n    autoPlay?: boolean;\n    autoPlayInterval?: number;\n    autoPlayReverse?: boolean;\n    carouselController: ICarouselController;\n}) {\n    const {\n        autoPlay = false,\n        autoPlayReverse = false,\n        autoPlayInterval,\n        carouselController,\n    } = opts;\n\n    const { prev, next } = carouselController;\n    const timer = React.useRef<NodeJS.Timer>();\n    const stopped = React.useRef<boolean>(!autoPlay);\n\n    const play = React.useCallback(() => {\n        if (stopped.current) {\n            return;\n        }\n\n        timer.current && clearTimeout(timer.current);\n        timer.current = setTimeout(() => {\n            autoPlayReverse\n                ? prev({ onFinished: play })\n                : next({ onFinished: play });\n        }, autoPlayInterval);\n    }, [autoPlayReverse, autoPlayInterval, prev, next]);\n\n    const pause = React.useCallback(() => {\n        if (!autoPlay) {\n            return;\n        }\n        timer.current && clearTimeout(timer.current);\n        stopped.current = true;\n    }, [autoPlay]);\n\n    const start = React.useCallback(() => {\n        if (!autoPlay) {\n            return;\n        }\n        stopped.current = false;\n        play();\n    }, [play, autoPlay]);\n\n    React.useEffect(() => {\n        if (autoPlay) {\n            start();\n        } else {\n            pause();\n        }\n        return pause;\n    }, [pause, start, autoPlay]);\n\n    return {\n        pause,\n        start,\n    };\n}\n"]}