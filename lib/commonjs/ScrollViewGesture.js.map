{"version":3,"sources":["ScrollViewGesture.tsx"],"names":["IScrollViewGesture","props","React","useContext","CTX","vertical","data","pagingEnabled","snapEnabled","panGestureHandlerProps","infinite","loop","scrollAnimationDuration","withAnimation","enabled","translation","size","onScrollBegin","onScrollEnd","onTouchBegin","onTouchEnd","maxPage","length","isHorizontal","touching","scrollEndTranslation","scrollEndVelocity","_withSpring","useCallback","toValue","onFinished","defaultWithAnimation","type","config","duration","easing","Easing","easeOutQuart","isFinished","runOnJS","dealWithAnimation","endWithSpring","origin","value","velocity","nextPage","Math","round","deceleration","direction","computed","ceil","floor","page","finalPage","min","max","withDecay","onFinish","activeDecay","resetBoundary","panGestureEventHandler","onStart","_","ctx","validStart","panOffset","onActive","e","translationX","translationY","panTranslation","boundary","fixed","dynamic","cancelAnimation","onEnd","velocityX","velocityY","directionStyle","useMemo","styles","contentHorizontal","contentVertical","container","width","height","children","ScrollViewGesture","StyleSheet","create","flex","overflow","flexDirection"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { StyleProp, StyleSheet, ViewStyle } from 'react-native';\nimport {\n    PanGestureHandler,\n    PanGestureHandlerGestureEvent,\n} from 'react-native-gesture-handler';\nimport Animated, {\n    cancelAnimation,\n    runOnJS,\n    useAnimatedGestureHandler,\n    useAnimatedReaction,\n    useDerivedValue,\n    useSharedValue,\n    withDecay,\n} from 'react-native-reanimated';\nimport { Easing } from './constants';\nimport { CTX } from './store';\nimport type { WithTimingAnimation } from './types';\nimport { dealWithAnimation } from './utils/dealWithAnimation';\n\ntype GestureContext = {\n    validStart: boolean;\n    panOffset: number;\n    max: number;\n};\n\ninterface Props {\n    size: number;\n    infinite?: boolean;\n    onScrollBegin?: () => void;\n    onScrollEnd?: () => void;\n    onTouchBegin?: () => void;\n    onTouchEnd?: () => void;\n    style?: StyleProp<ViewStyle>;\n    translation: Animated.SharedValue<number>;\n}\n\nconst IScrollViewGesture: React.FC<Props> = (props) => {\n    const {\n        props: {\n            vertical,\n            data,\n            pagingEnabled,\n            snapEnabled,\n            panGestureHandlerProps,\n            loop: infinite,\n            scrollAnimationDuration,\n            withAnimation,\n            enabled,\n        },\n    } = React.useContext(CTX);\n\n    const {\n        translation,\n        size,\n        onScrollBegin,\n        onScrollEnd,\n        onTouchBegin,\n        onTouchEnd,\n    } = props;\n\n    const maxPage = data.length;\n    const isHorizontal = useDerivedValue(() => !vertical, [vertical]);\n    const touching = useSharedValue(false);\n    const scrollEndTranslation = useSharedValue(0);\n    const scrollEndVelocity = useSharedValue(0);\n\n    const _withSpring = React.useCallback(\n        (toValue: number, onFinished?: () => void) => {\n            'worklet';\n            const defaultWithAnimation: WithTimingAnimation = {\n                type: 'timing',\n                config: {\n                    duration: scrollAnimationDuration + 100,\n                    easing: Easing.easeOutQuart,\n                },\n            };\n\n            return dealWithAnimation(withAnimation ?? defaultWithAnimation)(\n                toValue,\n                (isFinished: boolean) => {\n                    'worklet';\n                    if (isFinished) {\n                        onFinished && runOnJS(onFinished)();\n                    }\n                }\n            );\n        },\n        [scrollAnimationDuration, withAnimation]\n    );\n\n    const endWithSpring = React.useCallback(\n        (onFinished?: () => void) => {\n            'worklet';\n            const origin = translation.value;\n            const velocity = scrollEndVelocity.value;\n            if (!pagingEnabled) {\n                /**\n                 * If enabled, releasing the touch will scroll to the nearest item.\n                 * valid when pagingEnabled=false\n                 */\n                if (snapEnabled) {\n                    const nextPage =\n                        Math.round((origin + velocity * 0.4) / size) * size;\n\n                    translation.value = _withSpring(nextPage, onFinished);\n                    return;\n                }\n                translation.value = withDecay({\n                    velocity,\n                    deceleration: 0.999,\n                });\n                return;\n            }\n\n            const direction = -(scrollEndTranslation.value >= 0 ? 1 : -1);\n            const computed = direction < 0 ? Math.ceil : Math.floor;\n            const page = computed(-translation.value / size);\n            let finalPage = page + direction;\n\n            if (!infinite) {\n                finalPage = Math.min(maxPage - 1, Math.max(0, finalPage));\n            }\n\n            translation.value = _withSpring(-finalPage * size, onFinished);\n        },\n        [\n            translation,\n            scrollEndVelocity.value,\n            pagingEnabled,\n            size,\n            scrollEndTranslation.value,\n            infinite,\n            _withSpring,\n            snapEnabled,\n            maxPage,\n        ]\n    );\n\n    const onFinish = React.useCallback(\n        (isFinished: boolean) => {\n            'worklet';\n            if (isFinished) {\n                touching.value = false;\n                onScrollEnd && runOnJS(onScrollEnd)();\n            }\n        },\n        [onScrollEnd, touching]\n    );\n\n    const activeDecay = React.useCallback(() => {\n        'worklet';\n        touching.value = true;\n        translation.value = withDecay(\n            { velocity: scrollEndVelocity.value },\n            (isFinished) => onFinish(isFinished as boolean)\n        );\n    }, [onFinish, scrollEndVelocity.value, touching, translation]);\n\n    const resetBoundary = React.useCallback(() => {\n        'worklet';\n        if (touching.value) {\n            return;\n        }\n\n        if (translation.value > 0) {\n            if (scrollEndTranslation.value < 0) {\n                activeDecay();\n                return;\n            }\n            if (!infinite) {\n                translation.value = _withSpring(0);\n                return;\n            }\n        }\n\n        if (translation.value < -((maxPage - 1) * size)) {\n            if (scrollEndTranslation.value > 0) {\n                activeDecay();\n                return;\n            }\n            if (!infinite) {\n                translation.value = _withSpring(-((maxPage - 1) * size));\n                return;\n            }\n        }\n    }, [\n        touching.value,\n        translation,\n        maxPage,\n        size,\n        scrollEndTranslation.value,\n        infinite,\n        activeDecay,\n        _withSpring,\n    ]);\n\n    useAnimatedReaction(\n        () => translation.value,\n        () => {\n            if (!pagingEnabled) {\n                resetBoundary();\n            }\n        },\n        [pagingEnabled, resetBoundary]\n    );\n\n    const panGestureEventHandler = useAnimatedGestureHandler<\n        PanGestureHandlerGestureEvent,\n        GestureContext\n    >(\n        {\n            onStart: (_, ctx) => {\n                touching.value = true;\n                ctx.validStart = true;\n                onScrollBegin && runOnJS(onScrollBegin)();\n                ctx.max = (maxPage - 1) * size;\n                ctx.panOffset = translation.value;\n            },\n            onActive: (e, ctx) => {\n                if (ctx.validStart) {\n                    ctx.validStart = false;\n                    cancelAnimation(translation);\n                }\n                touching.value = true;\n                const { translationX, translationY } = e;\n                let panTranslation = isHorizontal.value\n                    ? translationX\n                    : translationY;\n\n                if (\n                    !infinite &&\n                    (translation.value > 0 || translation.value < -ctx.max)\n                ) {\n                    const boundary = translation.value > 0 ? 0 : -ctx.max;\n                    const fixed = boundary - ctx.panOffset;\n                    const dynamic = panTranslation - fixed;\n                    translation.value = boundary + dynamic * 0.5;\n                    return;\n                }\n\n                translation.value = ctx.panOffset + panTranslation;\n            },\n            onEnd: (e) => {\n                const { velocityX, velocityY, translationX, translationY } = e;\n                scrollEndVelocity.value = isHorizontal.value\n                    ? velocityX\n                    : velocityY;\n                scrollEndTranslation.value = isHorizontal.value\n                    ? translationX\n                    : translationY;\n\n                endWithSpring(onScrollEnd);\n\n                if (!infinite) {\n                    touching.value = false;\n                }\n            },\n        },\n        [\n            pagingEnabled,\n            isHorizontal.value,\n            infinite,\n            maxPage,\n            size,\n            snapEnabled,\n            onScrollBegin,\n            onScrollEnd,\n        ]\n    );\n\n    const directionStyle = React.useMemo(() => {\n        return vertical ? styles.contentHorizontal : styles.contentVertical;\n    }, [vertical]);\n\n    return (\n        <Animated.View\n            style={[\n                styles.container,\n                directionStyle,\n                { width: '100%', height: '100%' },\n            ]}\n            onTouchStart={onTouchBegin}\n            onTouchEnd={onTouchEnd}\n        >\n            <PanGestureHandler\n                {...panGestureHandlerProps}\n                enabled={enabled}\n                onGestureEvent={panGestureEventHandler}\n            >\n                {props.children}\n            </PanGestureHandler>\n        </Animated.View>\n    );\n};\n\nexport const ScrollViewGesture = IScrollViewGesture;\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        overflow: 'hidden',\n    },\n    contentVertical: {\n        flexDirection: 'column',\n    },\n    contentHorizontal: {\n        flexDirection: 'row',\n    },\n});\n"]}