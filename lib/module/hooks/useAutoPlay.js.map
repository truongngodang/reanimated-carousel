{"version":3,"sources":["useAutoPlay.ts"],"names":["React","useAutoPlay","opts","autoPlay","autoPlayReverse","autoPlayInterval","carouselController","prev","next","timer","useRef","stopped","play","useCallback","current","clearTimeout","setTimeout","onFinished","pause","start","useEffect"],"mappings":"AAAA,OAAO,KAAKA,KAAZ,MAAuB,OAAvB;AAGA,OAAO,SAASC,WAAT,CAAqBC,IAArB,EAKJ;AACC,QAAM;AACFC,IAAAA,QAAQ,GAAG,KADT;AAEFC,IAAAA,eAAe,GAAG,KAFhB;AAGFC,IAAAA,gBAHE;AAIFC,IAAAA;AAJE,MAKFJ,IALJ;AAOA,QAAM;AAAEK,IAAAA,IAAF;AAAQC,IAAAA;AAAR,MAAiBF,kBAAvB;AACA,QAAMG,KAAK,GAAGT,KAAK,CAACU,MAAN,EAAd;AACA,QAAMC,OAAO,GAAGX,KAAK,CAACU,MAAN,CAAsB,CAACP,QAAvB,CAAhB;AAEA,QAAMS,IAAI,GAAGZ,KAAK,CAACa,WAAN,CAAkB,MAAM;AACjC,QAAIF,OAAO,CAACG,OAAZ,EAAqB;AACjB;AACH;;AAEDL,IAAAA,KAAK,CAACK,OAAN,IAAiBC,YAAY,CAACN,KAAK,CAACK,OAAP,CAA7B;AACAL,IAAAA,KAAK,CAACK,OAAN,GAAgBE,UAAU,CAAC,MAAM;AAC7BZ,MAAAA,eAAe,GACTG,IAAI,CAAC;AAAEU,QAAAA,UAAU,EAAEL;AAAd,OAAD,CADK,GAETJ,IAAI,CAAC;AAAES,QAAAA,UAAU,EAAEL;AAAd,OAAD,CAFV;AAGH,KAJyB,EAIvBP,gBAJuB,CAA1B;AAKH,GAXY,EAWV,CAACD,eAAD,EAAkBC,gBAAlB,EAAoCE,IAApC,EAA0CC,IAA1C,CAXU,CAAb;AAaA,QAAMU,KAAK,GAAGlB,KAAK,CAACa,WAAN,CAAkB,MAAM;AAClC,QAAI,CAACV,QAAL,EAAe;AACX;AACH;;AACDM,IAAAA,KAAK,CAACK,OAAN,IAAiBC,YAAY,CAACN,KAAK,CAACK,OAAP,CAA7B;AACAH,IAAAA,OAAO,CAACG,OAAR,GAAkB,IAAlB;AACH,GANa,EAMX,CAACX,QAAD,CANW,CAAd;AAQA,QAAMgB,KAAK,GAAGnB,KAAK,CAACa,WAAN,CAAkB,MAAM;AAClC,QAAI,CAACV,QAAL,EAAe;AACX;AACH;;AACDQ,IAAAA,OAAO,CAACG,OAAR,GAAkB,KAAlB;AACAF,IAAAA,IAAI;AACP,GANa,EAMX,CAACA,IAAD,EAAOT,QAAP,CANW,CAAd;AAQAH,EAAAA,KAAK,CAACoB,SAAN,CAAgB,MAAM;AAClB,QAAIjB,QAAJ,EAAc;AACVgB,MAAAA,KAAK;AACR,KAFD,MAEO;AACHD,MAAAA,KAAK;AACR;;AACD,WAAOA,KAAP;AACH,GAPD,EAOG,CAACA,KAAD,EAAQC,KAAR,EAAehB,QAAf,CAPH;AASA,SAAO;AACHe,IAAAA,KADG;AAEHC,IAAAA;AAFG,GAAP;AAIH","sourcesContent":["import * as React from 'react';\nimport type { ICarouselController } from './useCarouselController';\n\nexport function useAutoPlay(opts: {\n    autoPlay?: boolean;\n    autoPlayInterval?: number;\n    autoPlayReverse?: boolean;\n    carouselController: ICarouselController;\n}) {\n    const {\n        autoPlay = false,\n        autoPlayReverse = false,\n        autoPlayInterval,\n        carouselController,\n    } = opts;\n\n    const { prev, next } = carouselController;\n    const timer = React.useRef<NodeJS.Timer>();\n    const stopped = React.useRef<boolean>(!autoPlay);\n\n    const play = React.useCallback(() => {\n        if (stopped.current) {\n            return;\n        }\n\n        timer.current && clearTimeout(timer.current);\n        timer.current = setTimeout(() => {\n            autoPlayReverse\n                ? prev({ onFinished: play })\n                : next({ onFinished: play });\n        }, autoPlayInterval);\n    }, [autoPlayReverse, autoPlayInterval, prev, next]);\n\n    const pause = React.useCallback(() => {\n        if (!autoPlay) {\n            return;\n        }\n        timer.current && clearTimeout(timer.current);\n        stopped.current = true;\n    }, [autoPlay]);\n\n    const start = React.useCallback(() => {\n        if (!autoPlay) {\n            return;\n        }\n        stopped.current = false;\n        play();\n    }, [play, autoPlay]);\n\n    React.useEffect(() => {\n        if (autoPlay) {\n            start();\n        } else {\n            pause();\n        }\n        return pause;\n    }, [pause, start, autoPlay]);\n\n    return {\n        pause,\n        start,\n    };\n}\n"]}